{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"index.html","title":"miam { #miam }","text":""},{"location":"index.html#install","title":"Install","text":"<p>Install dependencies and setup virtual environment. Requires <code>uv</code> installed.</p> <pre><code>make install\n</code></pre>"},{"location":"index.html#run","title":"Run","text":"<p>Launch project using <code>docker compose</code>.</p> <pre><code>make start\n</code></pre> <p>Stop project.</p> <pre><code>make stop\n</code></pre>"},{"location":"index.html#dev","title":"Dev","text":"<p>Run pre-commit checks over the entire repo.</p> <pre><code>make pre-commit\n</code></pre>"},{"location":"index.html#architecture","title":"Architecture","text":"<ul> <li>Containerization: Docker Compose</li> <li>Backend: PostgreSQL, FastAPI, SqlAlchemy, Alembic, Python</li> <li>Frontend (vibe-coded): React, TypeScript, Vite, Tailwind CSS, shadcn/ui</li> </ul>"},{"location":"reference/index.html","title":"API reference","text":""},{"location":"reference/index.html#miam","title":"miam","text":"MODULE DESCRIPTION <code>api</code> <p>FastAPI module.</p> <code>domain</code> <p>Domain module. Contains core business logic, domain models, and service implementations. This is the heart of the application, independent of any specific framework or infrastructure.</p> <code>infra</code> <p>Infrastructure module. Contains implementations of domain ports and database-related code. This module is responsible for interacting with external systems (e.g., databases) and should not contain any business logic. It serves as the \"outer layer\" in the hexagonal architecture, allowing the core domain to remain independent of specific technologies or frameworks.</p>"},{"location":"reference/SUMMARY.html","title":"SUMMARY","text":"<ul> <li>api<ul> <li>deps</li> <li>main</li> <li>routes<ul> <li>export</li> <li>helpers</li> <li>images</li> <li>recipes</li> <li>root</li> </ul> </li> </ul> </li> <li>domain<ul> <li>entities</li> <li>ports_primary</li> <li>ports_secondary</li> <li>schemas</li> <li>services</li> </ul> </li> <li>infra<ul> <li>db<ul> <li>base</li> <li>session</li> </ul> </li> <li>exporter_markdown</li> <li>exporter_word</li> <li>image_storage</li> <li>repositories</li> </ul> </li> </ul>"},{"location":"reference/api/index.html","title":"api","text":""},{"location":"reference/api/index.html#miam.api","title":"api","text":"<p>FastAPI module.</p> MODULE DESCRIPTION <code>deps</code> <p>Dependency injection for FastAPI routes.</p> <code>main</code> <p>Entrypoint for the FastAPI application.</p> <code>routes</code> <p>API routes for the application.</p>"},{"location":"reference/api/deps.html","title":"deps","text":""},{"location":"reference/api/deps.html#miam.api.deps","title":"deps","text":"<p>Dependency injection for FastAPI routes.</p>"},{"location":"reference/api/main.html","title":"main","text":""},{"location":"reference/api/main.html#miam.api.main","title":"main","text":"<p>Entrypoint for the FastAPI application.</p>"},{"location":"reference/api/routes/index.html","title":"routes","text":""},{"location":"reference/api/routes/index.html#miam.api.routes","title":"routes","text":"<p>API routes for the application.</p> MODULE DESCRIPTION <code>export</code> <p>API routes for exporting recipes in various formats.</p> <code>helpers</code> <p>Helpers functions.</p> <code>images</code> <p>API routes for managing images.</p> <code>recipes</code> <p>API routes for managing recipes (CRUD operations).</p> <code>root</code> <p>API routes for the root endpoint.</p>"},{"location":"reference/api/routes/export.html","title":"export","text":""},{"location":"reference/api/routes/export.html#miam.api.routes.export","title":"export","text":"<p>API routes for exporting recipes in various formats.</p>"},{"location":"reference/api/routes/helpers.html","title":"helpers","text":""},{"location":"reference/api/routes/helpers.html#miam.api.routes.helpers","title":"helpers","text":"<p>Helpers functions.</p>"},{"location":"reference/api/routes/helpers.html#miam.api.routes.helpers.get_filename","title":"get_filename","text":"<pre><code>get_filename(image: UploadFile) -&gt; str\n</code></pre> <p>Determine a filename for the uploaded image.</p> <p>If the uploaded file has an original filename, use it. Otherwise, generate a unique filename based on the content type.</p>"},{"location":"reference/api/routes/images.html","title":"images","text":""},{"location":"reference/api/routes/images.html#miam.api.routes.images","title":"images","text":"<p>API routes for managing images.</p>"},{"location":"reference/api/routes/recipes.html","title":"recipes","text":""},{"location":"reference/api/routes/recipes.html#miam.api.routes.recipes","title":"recipes","text":"<p>API routes for managing recipes (CRUD operations).</p>"},{"location":"reference/api/routes/recipes.html#miam.api.routes.recipes.create_recipe","title":"create_recipe","text":"<pre><code>create_recipe(\n    recipe_in: RecipeCreate, service: RecipeManagementService\n) -&gt; RecipeResponse\n</code></pre> <p>Create a new recipe.</p>"},{"location":"reference/api/routes/recipes.html#miam.api.routes.recipes.create_recipes","title":"create_recipes","text":"<pre><code>create_recipes(\n    batch_in: BatchRecipeCreate, service: RecipeManagementService\n) -&gt; BatchRecipeResponse\n</code></pre> <p>Create multiple recipes in a single atomic operation.</p>"},{"location":"reference/api/routes/recipes.html#miam.api.routes.recipes.delete_recipe","title":"delete_recipe","text":"<pre><code>delete_recipe(recipe_id: UUID, service: RecipeManagementService) -&gt; None\n</code></pre> <p>Delete a recipe by ID.</p>"},{"location":"reference/api/routes/recipes.html#miam.api.routes.recipes.get_recipes","title":"get_recipes","text":"<pre><code>get_recipes(\n    service: RecipeManagementService, limit: int | None = None, offset: int = 0\n) -&gt; PaginatedRecipeResponse\n</code></pre> <p>Retrieve recipes with optional pagination.</p>"},{"location":"reference/api/routes/recipes.html#miam.api.routes.recipes.search_recipes","title":"search_recipes","text":"<pre><code>search_recipes(\n    service: RecipeManagementService,\n    recipe_id: UUID | None = None,\n    title: str | None = None,\n    category: str | None = None,\n    is_veggie: bool | None = None,\n    season: str | None = None,\n    limit: int | None = None,\n    offset: int = 0,\n) -&gt; PaginatedRecipeResponse\n</code></pre> <p>Search recipes with optional filters and pagination.</p>"},{"location":"reference/api/routes/root.html","title":"root","text":""},{"location":"reference/api/routes/root.html#miam.api.routes.root","title":"root","text":"<p>API routes for the root endpoint.</p>"},{"location":"reference/domain/index.html","title":"domain","text":""},{"location":"reference/domain/index.html#miam.domain","title":"domain","text":"<p>Domain module. Contains core business logic, domain models, and service implementations. This is the heart of the application, independent of any specific framework or infrastructure.</p> MODULE DESCRIPTION <code>entities</code> <p>Pure domain entities and enums, independent of any framework or infrastructure.</p> <code>ports_primary</code> <p>Define how services can be used by external consumers (e.g., HTTP API, CLI).</p> <code>ports_secondary</code> <p>Define how the domain interacts with infrastructure.</p> <code>schemas</code> <p>I/O models to interact with entities.</p> <code>services</code> <p>Orchestrate recipe operations.</p>"},{"location":"reference/domain/entities.html","title":"entities","text":""},{"location":"reference/domain/entities.html#miam.domain.entities","title":"entities","text":"<p>Pure domain entities and enums, independent of any framework or infrastructure.</p>"},{"location":"reference/domain/entities.html#miam.domain.entities.Category","title":"Category","text":"<p>Recipe course categories.</p>"},{"location":"reference/domain/entities.html#miam.domain.entities.Season","title":"Season","text":"<p>Recipe seasonal availability.</p>"},{"location":"reference/domain/entities.html#miam.domain.entities.SourceType","title":"SourceType","text":"<p>Recipe source origin types.</p>"},{"location":"reference/domain/ports_primary.html","title":"ports_primary","text":""},{"location":"reference/domain/ports_primary.html#miam.domain.ports_primary","title":"ports_primary","text":"<p>Define how services can be used by external consumers (e.g., HTTP API, CLI).</p>"},{"location":"reference/domain/ports_primary.html#miam.domain.ports_primary.RecipeExportServicePort","title":"RecipeExportServicePort","text":""},{"location":"reference/domain/ports_primary.html#miam.domain.ports_primary.RecipeExportServicePort.export_recipes_to_markdown","title":"export_recipes_to_markdown  <code>abstractmethod</code>","text":"<pre><code>export_recipes_to_markdown() -&gt; bytes\n</code></pre> <p>Export all recipes as a ZIP archive containing Markdown and images.</p>"},{"location":"reference/domain/ports_primary.html#miam.domain.ports_primary.RecipeExportServicePort.export_recipes_to_word","title":"export_recipes_to_word  <code>abstractmethod</code>","text":"<pre><code>export_recipes_to_word() -&gt; bytes\n</code></pre> <p>Export all recipes as Word document.</p>"},{"location":"reference/domain/ports_primary.html#miam.domain.ports_primary.RecipeServicePort","title":"RecipeServicePort","text":""},{"location":"reference/domain/ports_primary.html#miam.domain.ports_primary.RecipeServicePort.add_recipe_image","title":"add_recipe_image  <code>abstractmethod</code>","text":"<pre><code>add_recipe_image(recipe_id: UUID, content: bytes, filename: str) -&gt; UUID\n</code></pre> <p>Add an image to a recipe and return its image ID.</p>"},{"location":"reference/domain/ports_primary.html#miam.domain.ports_primary.RecipeServicePort.create_recipe","title":"create_recipe  <code>abstractmethod</code>","text":"<pre><code>create_recipe(data: RecipeCreate) -&gt; RecipeEntity\n</code></pre> <p>Persist a new recipe with all related entities and return the created Recipe.</p>"},{"location":"reference/domain/ports_primary.html#miam.domain.ports_primary.RecipeServicePort.create_recipes","title":"create_recipes  <code>abstractmethod</code>","text":"<pre><code>create_recipes(data: list[RecipeCreate]) -&gt; list[RecipeEntity]\n</code></pre> <p>Persist multiple recipes atomically and return all created Recipe entities.</p>"},{"location":"reference/domain/ports_primary.html#miam.domain.ports_primary.RecipeServicePort.delete_recipe","title":"delete_recipe  <code>abstractmethod</code>","text":"<pre><code>delete_recipe(recipe_id: UUID) -&gt; bool\n</code></pre> <p>Delete a recipe by ID. Returns True if deleted, False if not found.</p>"},{"location":"reference/domain/ports_primary.html#miam.domain.ports_primary.RecipeServicePort.delete_recipe_image","title":"delete_recipe_image  <code>abstractmethod</code>","text":"<pre><code>delete_recipe_image(image_id: UUID) -&gt; bool\n</code></pre> <p>Delete an image from storage and database. Returns True if deleted, False if not found.</p>"},{"location":"reference/domain/ports_primary.html#miam.domain.ports_primary.RecipeServicePort.get_recipe_by_id","title":"get_recipe_by_id  <code>abstractmethod</code>","text":"<pre><code>get_recipe_by_id(recipe_id: UUID) -&gt; RecipeEntity | None\n</code></pre> <p>Retrieve a recipe by its ID, including all related entities.</p>"},{"location":"reference/domain/ports_primary.html#miam.domain.ports_primary.RecipeServicePort.get_recipe_image","title":"get_recipe_image  <code>abstractmethod</code>","text":"<pre><code>get_recipe_image(image_id: UUID) -&gt; ImageResponse | None\n</code></pre> <p>Retrieve image bytes for a given image ID.</p>"},{"location":"reference/domain/ports_primary.html#miam.domain.ports_primary.RecipeServicePort.search_recipes","title":"search_recipes  <code>abstractmethod</code>","text":"<pre><code>search_recipes(\n    recipe_id: UUID | None = None,\n    title: str | None = None,\n    category: str | None = None,\n    is_veggie: bool | None = None,\n    season: str | None = None,\n    limit: int | None = None,\n    offset: int = 0,\n) -&gt; PaginatedResult\n</code></pre> <p>Search for recipes using dynamic filters with pagination.</p>"},{"location":"reference/domain/ports_primary.html#miam.domain.ports_primary.RecipeServicePort.update_recipe","title":"update_recipe  <code>abstractmethod</code>","text":"<pre><code>update_recipe(recipe_id: UUID, data: RecipeUpdate) -&gt; RecipeEntity | None\n</code></pre> <p>Full replacement of a recipe (PUT semantics). Returns None if not found.</p>"},{"location":"reference/domain/ports_secondary.html","title":"ports_secondary","text":""},{"location":"reference/domain/ports_secondary.html#miam.domain.ports_secondary","title":"ports_secondary","text":"<p>Define how the domain interacts with infrastructure.</p>"},{"location":"reference/domain/ports_secondary.html#miam.domain.ports_secondary.ImageStoragePort","title":"ImageStoragePort","text":""},{"location":"reference/domain/ports_secondary.html#miam.domain.ports_secondary.ImageStoragePort.add_recipe_image","title":"add_recipe_image  <code>abstractmethod</code>","text":"<pre><code>add_recipe_image(recipe_id: UUID, image: bytes, filename: str, image_id: UUID) -&gt; UUID\n</code></pre> <p>Add an image to storage and return its image ID.</p>"},{"location":"reference/domain/ports_secondary.html#miam.domain.ports_secondary.ImageStoragePort.delete_image","title":"delete_image  <code>abstractmethod</code>","text":"<pre><code>delete_image(image_id: UUID) -&gt; bool\n</code></pre> <p>Delete an image file from storage. Returns True if deleted, False if not found.</p>"},{"location":"reference/domain/ports_secondary.html#miam.domain.ports_secondary.ImageStoragePort.get_recipe_image","title":"get_recipe_image  <code>abstractmethod</code>","text":"<pre><code>get_recipe_image(image_id: UUID) -&gt; ImageResponse | None\n</code></pre> <p>Retrieve image bytes from storage by image ID.</p>"},{"location":"reference/domain/ports_secondary.html#miam.domain.ports_secondary.MarkdownExporterPort","title":"MarkdownExporterPort","text":"<p>Secondary port for Markdown format export.</p>"},{"location":"reference/domain/ports_secondary.html#miam.domain.ports_secondary.MarkdownExporterPort.save","title":"save  <code>abstractmethod</code>","text":"<pre><code>save(recipes: list[RecipeEntity], output_file: str) -&gt; None\n</code></pre> <p>Save recipes to a Markdown file (includes I/O side effect).</p>"},{"location":"reference/domain/ports_secondary.html#miam.domain.ports_secondary.MarkdownExporterPort.to_string","title":"to_string  <code>abstractmethod</code>","text":"<pre><code>to_string(recipes: list[RecipeEntity]) -&gt; str\n</code></pre> <p>Serialize recipes to Markdown string format.</p>"},{"location":"reference/domain/ports_secondary.html#miam.domain.ports_secondary.MarkdownExporterPort.to_zip_bytes","title":"to_zip_bytes  <code>abstractmethod</code>","text":"<pre><code>to_zip_bytes(recipes: list[RecipeEntity]) -&gt; bytes\n</code></pre> <p>Serialize recipes to a ZIP archive containing the Markdown file and images.</p>"},{"location":"reference/domain/ports_secondary.html#miam.domain.ports_secondary.RecipeRepositoryPort","title":"RecipeRepositoryPort","text":"<p>Secondary port for recipe persistence.</p> <p>Abstraction for database operations. The domain doesn't care if it's SQLAlchemy, MongoDB, or any other persistence mechanism.</p>"},{"location":"reference/domain/ports_secondary.html#miam.domain.ports_secondary.RecipeRepositoryPort.add_image","title":"add_image  <code>abstractmethod</code>","text":"<pre><code>add_image(\n    recipe_id: UUID, caption: str | None = None, display_order: int | None = 0\n) -&gt; ImageEntity\n</code></pre> <p>Persist an Image record for a recipe and return the created ImageEntity.</p>"},{"location":"reference/domain/ports_secondary.html#miam.domain.ports_secondary.RecipeRepositoryPort.add_recipe","title":"add_recipe  <code>abstractmethod</code>","text":"<pre><code>add_recipe(data: RecipeCreate) -&gt; RecipeEntity\n</code></pre> <p>Persist a new recipe and return it as a domain entity.</p>"},{"location":"reference/domain/ports_secondary.html#miam.domain.ports_secondary.RecipeRepositoryPort.add_recipes","title":"add_recipes  <code>abstractmethod</code>","text":"<pre><code>add_recipes(data: list[RecipeCreate]) -&gt; list[RecipeEntity]\n</code></pre> <p>Persist multiple recipes atomically and return them as domain entities.</p>"},{"location":"reference/domain/ports_secondary.html#miam.domain.ports_secondary.RecipeRepositoryPort.delete_image","title":"delete_image  <code>abstractmethod</code>","text":"<pre><code>delete_image(image_id: UUID) -&gt; bool\n</code></pre> <p>Delete an Image record by ID. Returns True if deleted, False if not found.</p>"},{"location":"reference/domain/ports_secondary.html#miam.domain.ports_secondary.RecipeRepositoryPort.delete_recipe","title":"delete_recipe  <code>abstractmethod</code>","text":"<pre><code>delete_recipe(recipe_id: UUID) -&gt; bool\n</code></pre> <p>Delete a recipe by ID. Returns True if deleted, False if not found.</p>"},{"location":"reference/domain/ports_secondary.html#miam.domain.ports_secondary.RecipeRepositoryPort.get_recipe_by_id","title":"get_recipe_by_id  <code>abstractmethod</code>","text":"<pre><code>get_recipe_by_id(recipe_id: UUID) -&gt; RecipeEntity | None\n</code></pre> <p>Retrieve a recipe by ID with all relationships loaded.</p>"},{"location":"reference/domain/ports_secondary.html#miam.domain.ports_secondary.RecipeRepositoryPort.search_recipes","title":"search_recipes  <code>abstractmethod</code>","text":"<pre><code>search_recipes(\n    recipe_id: UUID | None = None,\n    title: str | None = None,\n    category: str | None = None,\n    is_veggie: bool | None = None,\n    season: str | None = None,\n    limit: int | None = None,\n    offset: int = 0,\n) -&gt; PaginatedResult\n</code></pre> <p>Query recipes with dynamic filtering and pagination.</p>"},{"location":"reference/domain/ports_secondary.html#miam.domain.ports_secondary.RecipeRepositoryPort.update_recipe","title":"update_recipe  <code>abstractmethod</code>","text":"<pre><code>update_recipe(recipe_id: UUID, data: RecipeUpdate) -&gt; RecipeEntity | None\n</code></pre> <p>Full replacement of a recipe. Returns None if not found.</p>"},{"location":"reference/domain/ports_secondary.html#miam.domain.ports_secondary.WordExporterPort","title":"WordExporterPort","text":"<p>Secondary port for Word format export.</p>"},{"location":"reference/domain/ports_secondary.html#miam.domain.ports_secondary.WordExporterPort.save","title":"save  <code>abstractmethod</code>","text":"<pre><code>save(recipes: list[RecipeEntity], output_path: str) -&gt; None\n</code></pre> <p>Save recipes to a Word file.</p>"},{"location":"reference/domain/ports_secondary.html#miam.domain.ports_secondary.WordExporterPort.to_bytes","title":"to_bytes  <code>abstractmethod</code>","text":"<pre><code>to_bytes(recipes: list[RecipeEntity]) -&gt; bytes\n</code></pre> <p>Serialize recipes to Word binary format.</p>"},{"location":"reference/domain/schemas.html","title":"schemas","text":""},{"location":"reference/domain/schemas.html#miam.domain.schemas","title":"schemas","text":"<p>I/O models to interact with entities.</p>"},{"location":"reference/domain/schemas.html#miam.domain.schemas.IngredientCreate","title":"IngredientCreate","text":""},{"location":"reference/domain/schemas.html#miam.domain.schemas.IngredientCreate.capitalize_name","title":"capitalize_name  <code>classmethod</code>","text":"<pre><code>capitalize_name(v: str) -&gt; str\n</code></pre> <p>Ensure ingredient name starts with a capital letter.</p>"},{"location":"reference/domain/schemas.html#miam.domain.schemas.RecipeCreate","title":"RecipeCreate","text":""},{"location":"reference/domain/schemas.html#miam.domain.schemas.RecipeCreate.assign_display_orders","title":"assign_display_orders","text":"<pre><code>assign_display_orders() -&gt; RecipeCreate\n</code></pre> <p>Auto-assign display_order from list position when not provided.</p>"},{"location":"reference/domain/schemas.html#miam.domain.schemas.RecipeCreate.coerce_season","title":"coerce_season  <code>classmethod</code>","text":"<pre><code>coerce_season(v: Any) -&gt; Any\n</code></pre> <p>Treat empty string as None.</p>"},{"location":"reference/domain/schemas.html#miam.domain.schemas.RecipeUpdate","title":"RecipeUpdate","text":"<p>Full replacement of a recipe (PUT). Images excluded \u2014 separate upload flow.</p>"},{"location":"reference/domain/schemas.html#miam.domain.schemas.RecipeUpdate.assign_display_orders","title":"assign_display_orders","text":"<pre><code>assign_display_orders() -&gt; RecipeUpdate\n</code></pre> <p>Auto-assign display_order from list position when not provided.</p>"},{"location":"reference/domain/services.html","title":"services","text":""},{"location":"reference/domain/services.html#miam.domain.services","title":"services","text":"<p>Orchestrate recipe operations.</p>"},{"location":"reference/domain/services.html#miam.domain.services.RecipeExportService","title":"RecipeExportService","text":"<pre><code>RecipeExportService(\n    repository: RecipeRepositoryPort,\n    word_exporter: WordExporterPort,\n    markdown_exporter: MarkdownExporterPort,\n)\n</code></pre> <p>Service for exporting recipes to different formats.</p>"},{"location":"reference/domain/services.html#miam.domain.services.RecipeExportService.export_recipes_to_markdown","title":"export_recipes_to_markdown","text":"<pre><code>export_recipes_to_markdown() -&gt; bytes\n</code></pre> <p>Export all recipes as a ZIP archive containing Markdown and images.</p>"},{"location":"reference/domain/services.html#miam.domain.services.RecipeExportService.export_recipes_to_word","title":"export_recipes_to_word","text":"<pre><code>export_recipes_to_word() -&gt; bytes\n</code></pre> <p>Export all recipes as Word binary format (in-memory).</p>"},{"location":"reference/domain/services.html#miam.domain.services.RecipeManagementService","title":"RecipeManagementService","text":"<pre><code>RecipeManagementService(\n    repository: RecipeRepositoryPort, image_storage: ImageStoragePort\n)\n</code></pre> <p>Service for recipe creation, retrieval, and search operations.</p>"},{"location":"reference/domain/services.html#miam.domain.services.RecipeManagementService.add_recipe_image","title":"add_recipe_image","text":"<pre><code>add_recipe_image(recipe_id: UUID, content: bytes, filename: str) -&gt; UUID\n</code></pre> <p>Add an image to a recipe and return its image ID.</p>"},{"location":"reference/domain/services.html#miam.domain.services.RecipeManagementService.create_recipe","title":"create_recipe","text":"<pre><code>create_recipe(data: RecipeCreate) -&gt; RecipeEntity\n</code></pre> <p>Create a new recipe with ingredients, images, and sources.</p>"},{"location":"reference/domain/services.html#miam.domain.services.RecipeManagementService.create_recipes","title":"create_recipes","text":"<pre><code>create_recipes(data: list[RecipeCreate]) -&gt; list[RecipeEntity]\n</code></pre> <p>Create multiple recipes in a single atomic transaction.</p>"},{"location":"reference/domain/services.html#miam.domain.services.RecipeManagementService.delete_recipe_image","title":"delete_recipe_image","text":"<pre><code>delete_recipe_image(image_id: UUID) -&gt; bool\n</code></pre> <p>Delete an image from storage and database.</p>"},{"location":"reference/domain/services.html#miam.domain.services.RecipeManagementService.get_recipe_by_id","title":"get_recipe_by_id","text":"<pre><code>get_recipe_by_id(recipe_id: UUID) -&gt; RecipeEntity | None\n</code></pre> <p>Retrieve a recipe by ID via the persistence abstraction.</p>"},{"location":"reference/domain/services.html#miam.domain.services.RecipeManagementService.get_recipe_image","title":"get_recipe_image","text":"<pre><code>get_recipe_image(image_id: UUID) -&gt; ImageResponse | None\n</code></pre> <p>Retrieve image bytes from storage by image ID.</p>"},{"location":"reference/domain/services.html#miam.domain.services.RecipeManagementService.search_recipes","title":"search_recipes","text":"<pre><code>search_recipes(\n    recipe_id: UUID | None = None,\n    title: str | None = None,\n    category: str | None = None,\n    is_veggie: bool | None = None,\n    season: str | None = None,\n    limit: int | None = None,\n    offset: int = 0,\n) -&gt; PaginatedResult\n</code></pre> <p>Search/filter recipes via the repository abstraction.</p>"},{"location":"reference/infra/index.html","title":"infra","text":""},{"location":"reference/infra/index.html#miam.infra","title":"infra","text":"<p>Infrastructure module. Contains implementations of domain ports and database-related code. This module is responsible for interacting with external systems (e.g., databases) and should not contain any business logic. It serves as the \"outer layer\" in the hexagonal architecture, allowing the core domain to remain independent of specific technologies or frameworks.</p> MODULE DESCRIPTION <code>db</code> <p>Handles the core database components, including database connection management and ORM model definitions.</p> <code>exporter_markdown</code> <p>Handles exporting recipes to Markdown format.</p> <code>exporter_word</code> <p>Handles exporting recipes to Word format.</p> <code>image_storage</code> <p>Handles storing images (local or remote file storage).</p> <code>repositories</code> <p>Handles all database-specific logic using SQLAlchemy.</p>"},{"location":"reference/infra/exporter_markdown.html","title":"exporter_markdown","text":""},{"location":"reference/infra/exporter_markdown.html#miam.infra.exporter_markdown","title":"exporter_markdown","text":"<p>Handles exporting recipes to Markdown format.</p>"},{"location":"reference/infra/exporter_markdown.html#miam.infra.exporter_markdown.MarkdownExporter","title":"MarkdownExporter","text":"<pre><code>MarkdownExporter(image_storage: ImageStoragePort | None = None)\n</code></pre> <p>Secondary adapter that implements MarkdownExporterPort.</p>"},{"location":"reference/infra/exporter_markdown.html#miam.infra.exporter_markdown.MarkdownExporter.save","title":"save","text":"<pre><code>save(recipes: list[RecipeEntity], output_file: str) -&gt; None\n</code></pre> <p>Export a list of RecipeEntity objects to a Markdown file.</p>"},{"location":"reference/infra/exporter_markdown.html#miam.infra.exporter_markdown.MarkdownExporter.to_string","title":"to_string","text":"<pre><code>to_string(recipes: list[RecipeEntity]) -&gt; str\n</code></pre> <p>Convert a list of RecipeEntity objects to a Markdown string.</p>"},{"location":"reference/infra/exporter_markdown.html#miam.infra.exporter_markdown.MarkdownExporter.to_zip_bytes","title":"to_zip_bytes","text":"<pre><code>to_zip_bytes(recipes: list[RecipeEntity]) -&gt; bytes\n</code></pre> <p>Create a ZIP archive containing the Markdown file and image files.</p>"},{"location":"reference/infra/exporter_word.html","title":"exporter_word","text":""},{"location":"reference/infra/exporter_word.html#miam.infra.exporter_word","title":"exporter_word","text":"<p>Handles exporting recipes to Word format.</p>"},{"location":"reference/infra/exporter_word.html#miam.infra.exporter_word.WordExporter","title":"WordExporter","text":"<pre><code>WordExporter(\n    title: str = \"My Recipe Book\", image_storage: ImageStoragePort | None = None\n)\n</code></pre> <p>Secondary adapter that implements WordExporterPort.</p>"},{"location":"reference/infra/exporter_word.html#miam.infra.exporter_word.WordExporter.save","title":"save","text":"<pre><code>save(recipes: list[RecipeEntity], output_path: str) -&gt; None\n</code></pre> <p>Export a list of RecipeEntity objects to a Word document.</p>"},{"location":"reference/infra/exporter_word.html#miam.infra.exporter_word.WordExporter.to_bytes","title":"to_bytes","text":"<pre><code>to_bytes(recipes: list[RecipeEntity]) -&gt; bytes\n</code></pre> <p>Export a list of RecipeEntity objects to a Word document as bytes.</p>"},{"location":"reference/infra/image_storage.html","title":"image_storage","text":""},{"location":"reference/infra/image_storage.html#miam.infra.image_storage","title":"image_storage","text":"<p>Handles storing images (local or remote file storage).</p>"},{"location":"reference/infra/image_storage.html#miam.infra.image_storage.LocalImageStorage","title":"LocalImageStorage","text":"<pre><code>LocalImageStorage(base_folder: str)\n</code></pre>"},{"location":"reference/infra/image_storage.html#miam.infra.image_storage.LocalImageStorage.add_recipe_image","title":"add_recipe_image","text":"<pre><code>add_recipe_image(recipe_id: UUID, image: bytes, filename: str, image_id: UUID) -&gt; UUID\n</code></pre> <p>Save image to local filesystem using predictable path {image_id}{ext}.</p>"},{"location":"reference/infra/image_storage.html#miam.infra.image_storage.LocalImageStorage.delete_image","title":"delete_image","text":"<pre><code>delete_image(image_id: UUID) -&gt; bool\n</code></pre> <p>Delete an image file from local storage by image ID.</p>"},{"location":"reference/infra/image_storage.html#miam.infra.image_storage.LocalImageStorage.get_recipe_image","title":"get_recipe_image","text":"<pre><code>get_recipe_image(image_id: UUID) -&gt; ImageResponse | None\n</code></pre> <p>Retrieve image bytes from storage by image ID.</p>"},{"location":"reference/infra/repositories.html","title":"repositories","text":""},{"location":"reference/infra/repositories.html#miam.infra.repositories","title":"repositories","text":"<p>Handles all database-specific logic using SQLAlchemy.</p>"},{"location":"reference/infra/repositories.html#miam.infra.repositories.RecipeRepository","title":"RecipeRepository","text":"<pre><code>RecipeRepository(session: Session)\n</code></pre> <p>Concrete implementation of RecipeRepositoryPort using SQLAlchemy.</p>"},{"location":"reference/infra/repositories.html#miam.infra.repositories.RecipeRepository.add_image","title":"add_image","text":"<pre><code>add_image(\n    recipe_id: UUID, caption: str | None = None, display_order: int | None = 0\n) -&gt; ImageEntity\n</code></pre> <p>Create and persist an Image linked to a recipe.</p>"},{"location":"reference/infra/repositories.html#miam.infra.repositories.RecipeRepository.add_recipe","title":"add_recipe","text":"<pre><code>add_recipe(data: RecipeCreate) -&gt; RecipeEntity\n</code></pre> <p>Persist a recipe from creation data and return a domain entity.</p>"},{"location":"reference/infra/repositories.html#miam.infra.repositories.RecipeRepository.add_recipes","title":"add_recipes","text":"<pre><code>add_recipes(data: list[RecipeCreate]) -&gt; list[RecipeEntity]\n</code></pre> <p>Persist multiple recipes in a single atomic transaction.</p>"},{"location":"reference/infra/repositories.html#miam.infra.repositories.RecipeRepository.delete_image","title":"delete_image","text":"<pre><code>delete_image(image_id: UUID) -&gt; bool\n</code></pre> <p>Delete an Image record by ID.</p>"},{"location":"reference/infra/repositories.html#miam.infra.repositories.RecipeRepository.delete_recipe","title":"delete_recipe","text":"<pre><code>delete_recipe(recipe_id: UUID) -&gt; bool\n</code></pre> <p>Delete a recipe and all related entities (via cascade).</p>"},{"location":"reference/infra/repositories.html#miam.infra.repositories.RecipeRepository.get_recipe_by_id","title":"get_recipe_by_id","text":"<pre><code>get_recipe_by_id(recipe_id: UUID) -&gt; RecipeEntity | None\n</code></pre> <p>Retrieve a recipe with all relationships loaded.</p>"},{"location":"reference/infra/repositories.html#miam.infra.repositories.RecipeRepository.search_recipes","title":"search_recipes","text":"<pre><code>search_recipes(\n    recipe_id: UUID | None = None,\n    title: str | None = None,\n    category: str | None = None,\n    is_veggie: bool | None = None,\n    season: str | None = None,\n    limit: int | None = None,\n    offset: int = 0,\n) -&gt; PaginatedResult\n</code></pre> <p>Search recipes with dynamic filtering and pagination.</p>"},{"location":"reference/infra/db/index.html","title":"db","text":""},{"location":"reference/infra/db/index.html#miam.infra.db","title":"db","text":"<p>Handles the core database components, including database connection management and ORM model definitions.</p> MODULE DESCRIPTION <code>base</code> <p>Database schema models using SQLAlchemy ORM.</p> <code>session</code> <p>Database session and engine configuration.</p>"},{"location":"reference/infra/db/base.html","title":"base","text":""},{"location":"reference/infra/db/base.html#miam.infra.db.base","title":"base","text":"<p>Database schema models using SQLAlchemy ORM.</p> <p>Defines all tables, relationships, and enums for the recipe management system.</p>"},{"location":"reference/infra/db/base.html#miam.infra.db.base.Image","title":"Image","text":"<p>Stores recipe images with metadata.</p>"},{"location":"reference/infra/db/base.html#miam.infra.db.base.Ingredient","title":"Ingredient","text":"<p>Stores ingredient names.</p>"},{"location":"reference/infra/db/base.html#miam.infra.db.base.Recipe","title":"Recipe","text":"<p>Stores recipe data with timing, ingredients, images, and sources.</p>"},{"location":"reference/infra/db/base.html#miam.infra.db.base.RecipeIngredient","title":"RecipeIngredient","text":"<p>Junction table linking recipes to ingredients with quantities.</p>"},{"location":"reference/infra/db/base.html#miam.infra.db.base.Source","title":"Source","text":"<p>Stores recipe source information and references.</p>"},{"location":"reference/infra/db/session.html","title":"session","text":""},{"location":"reference/infra/db/session.html#miam.infra.db.session","title":"session","text":"<p>Database session and engine configuration.</p> <p>Manages SQLAlchemy engine, session factory, and database settings.</p>"},{"location":"reference/infra/db/session.html#miam.infra.db.session.SessionLocal","title":"SessionLocal  <code>module-attribute</code>","text":"<pre><code>SessionLocal = sessionmaker(bind=engine, autoflush=False, autocommit=False)\n</code></pre> <p>Session factory for creating database sessions.</p>"},{"location":"reference/infra/db/session.html#miam.infra.db.session.alembic_config","title":"alembic_config  <code>module-attribute</code>","text":"<pre><code>alembic_config = AlembicConfig()\n</code></pre> <p>Global database configuration instance.</p>"},{"location":"reference/infra/db/session.html#miam.infra.db.session.engine","title":"engine  <code>module-attribute</code>","text":"<pre><code>engine = create_engine(database_url, future=True)\n</code></pre> <p>SQLAlchemy engine connected to the configured database.</p>"},{"location":"reference/infra/db/session.html#miam.infra.db.session.AlembicConfig","title":"AlembicConfig","text":"<p>Pydantic settings for database connection configuration.</p> <p>Manages database connection settings loaded from environment variables and .env files. Uses Pydantic's BaseSettings for validation and configuration management with support for nested environment variable names using double underscore delimiters.</p> ATTRIBUTE DESCRIPTION <code>database_url</code> <p>SQL connection string in the format <code>postgresql+psycopg2://user:password@host:port/database</code>. Defaults to a local PostgreSQL instance at localhost:5432 with database name 'recipes'.</p> <p> TYPE: <code>str</code> </p> Notes <ul> <li>Environment variable names can use <code>__</code> (double underscore)   as delimiters for nested configuration.</li> <li>Configuration is loaded from <code>.env</code> file if present.</li> <li>Extra environment variables are ignored.</li> <li>Settings can be overridden via environment variables   (e.g., <code>DATABASE_URL</code> overrides the default).</li> </ul>"}]}